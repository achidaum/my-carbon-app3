import streamlit as st

st.set_page_config(page_title="Carbon Tracker & Offset", layout="centered")

st.markdown("<h1 style='text-align: center; color: #059669;'>üåç ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡∏ô</h1>", unsafe_allow_html=True)

# ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
st.subheader("üöó 1. ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á")
transport = st.selectbox("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏û‡∏≤‡∏´‡∏ô‡∏∞", ["‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô)", "‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (EV)", "‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå", "‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (BTS/MRT)", "‡∏£‡∏ñ‡πÄ‡∏°‡∏•‡πå", "‡πÄ‡∏î‡∏¥‡∏ô/‡∏õ‡∏±‡πà‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô"])
distance = st.number_input("‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏Å‡∏¥‡πÇ‡∏•‡πÄ‡∏°‡∏ï‡∏£)", min_value=0.0, value=0.0)

st.subheader("üçî 2. ‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡πÇ‡∏†‡∏Ñ‡∏≠‡∏≤‡∏´‡∏≤‡∏£")
food_input = st.text_input("‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≤‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏∞‡πÑ‡∏£?", placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡πâ‡∏≤‡∏ß‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠, ‡∏™‡∏•‡∏±‡∏î‡∏ú‡∏±‡∏Å")

st.subheader("üí° 3. ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô")
ac_hours = st.slider("‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏£‡πå‡∏Å‡∏µ‡πà‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á?", 0, 12, 0)

if st.button("‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏î‡∏π‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏ä‡∏î‡πÄ‡∏ä‡∏¢"):
    # --- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡∏ô ---
    ef_map = {"‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô)": 0.21, "‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (EV)": 0.05, "‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå": 0.08, "‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (BTS/MRT)": 0.02, "‡∏£‡∏ñ‡πÄ‡∏°‡∏•‡πå": 0.03, "‡πÄ‡∏î‡∏¥‡∏ô/‡∏õ‡∏±‡πà‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô": 0}
    
    food_carbon = 1.2
    food_name = food_input.lower()
    if "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß" in food_name or ("‡πÄ‡∏ô‡∏∑‡πâ‡∏≠" in food_name and not any(x in food_name for x in ["‡πÑ‡∏Å‡πà", "‡∏´‡∏°‡∏π", "‡∏õ‡∏•‡∏≤"])):
        food_carbon = 7.5
    elif any(x in food_name for x in ["‡∏ú‡∏±‡∏Å", "‡∏™‡∏•‡∏±‡∏î", "‡πÄ‡∏à", "‡∏°‡∏±‡∏á‡∏™‡∏ß‡∏¥‡∏£‡∏±‡∏ï‡∏¥"]):
        food_carbon = 0.4
    
    total = (distance * ef_map[transport]) + food_carbon + (ac_hours * 0.51)
    
    # --- ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏£‡∏ó‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ---
    st.markdown("---")
    if total <= 3.0:
        st.success(f"### ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô: {total:.2f} kgCO2e (‡∏£‡∏∞‡∏î‡∏±‡∏ö: ‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° üü¢)")
    elif total <= 8.0:
        st.warning(f"### ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô: {total:.2f} kgCO2e (‡∏£‡∏∞‡∏î‡∏±‡∏ö: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏µ üü°)")
    else:
        st.error(f"### ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô: {total:.2f} kgCO2e (‡∏£‡∏∞‡∏î‡∏±‡∏ö: ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏™‡∏π‡∏á üî¥)")

    # --- ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏î‡πÄ‡∏ä‡∏¢ (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏™‡∏°‡∏≠‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö) ---
    st.markdown("### üåø ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡∏ô (Carbon Offset)")
    
    col1, col2 = st.columns(2)
    with col1:
        st.info("**1. ‡∏Å‡∏≤‡∏£‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥**\n"
                "- ‡∏õ‡∏•‡∏π‡∏Å‡πÑ‡∏°‡πâ‡∏¢‡∏∑‡∏ô‡∏ï‡πâ‡∏ô 1 ‡∏ï‡πâ‡∏ô ‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡∏î‡∏ã‡∏±‡∏ö‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡∏ô‡πÑ‡∏î‡πâ ~9-15 kg/‡∏õ‡∏µ\n"
                "- ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏õ‡∏•‡∏π‡∏Å‡∏õ‡πà‡∏≤‡∏ä‡∏≤‡∏¢‡πÄ‡∏•‡∏ô‡∏ã‡∏∂‡πà‡∏á‡∏î‡∏π‡∏î‡∏ã‡∏±‡∏ö‡∏Å‡πä‡∏≤‡∏ã‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏õ‡πà‡∏≤‡∏ö‡∏Å")
    with col2:
        st.info("**2. ‡∏Å‡∏≤‡∏£‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£**\n"
                "- ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô/‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏ú‡πà‡∏≤‡∏ô TGO (‡∏≠‡∏ö‡∏Å.)\n"
                "- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏•‡∏≤‡∏Å‡∏•‡∏î‡πÇ‡∏•‡∏Å‡∏£‡πâ‡∏≠‡∏ô (Carbon Footprint Reduction)")

    st.write("üëâ **‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ:** ‡∏´‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÄ‡∏¢‡∏≠‡∏∞ ‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏•‡∏≠‡∏á‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÅ‡∏≠‡∏£‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏î‡∏∏‡∏•‡πÉ‡∏´‡πâ‡πÇ‡∏•‡∏Å!")

st.markdown("---")
st.caption("‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå ‡∏≠‡∏ö‡∏Å.: ‡∏£‡∏ñ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô(0.21), ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß(7.5), ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤(0.51 per unit)")
